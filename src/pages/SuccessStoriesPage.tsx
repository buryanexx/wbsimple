import { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useWebApp } from '@vkruglikov/react-telegram-web-app';
import Card from '../components/Card';
import Button from '../components/Button';

interface SuccessStory {
  id: number;
  name: string;
  avatar: string;
  category: string;
  revenue: string;
  period: string;
  quote: string;
  fullStory: string;
}

const SuccessStoriesPage = () => {
  const navigate = useNavigate();
  const webApp = useWebApp();
  const [isLoading, setIsLoading] = useState(true);
  const [expandedStory, setExpandedStory] = useState<number | null>(null);

  // –ü—Ä–∏–º–µ—Ä—ã –∏—Å—Ç–æ—Ä–∏–π —É—Å–ø–µ—Ö–∞
  const successStories: SuccessStory[] = [
    {
      id: 1,
      name: '–ê–ª–µ–∫—Å–µ–π',
      avatar: 'üë®‚Äçüíº',
      category: '–¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–æ–º–∞',
      revenue: '350 000 ‚ÇΩ',
      period: '3 –º–µ—Å—è—Ü–∞',
      quote: '–ë–ª–∞–≥–æ–¥–∞—Ä—è –∫—É—Ä—Å—É —è –≤—ã—à–µ–ª –Ω–∞ –¥–æ—Ö–æ–¥ 350 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü –≤—Å–µ–≥–æ –∑–∞ 3 –º–µ—Å—è—Ü–∞ —Ä–∞–±–æ—Ç—ã —Å Wildberries',
      fullStory: '–î–æ –∫—É—Ä—Å–∞ —è —Ä–∞–±–æ—Ç–∞–ª –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –≤ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ —Å –∑–∞—Ä–ø–ª–∞—Ç–æ–π 80 000 ‚ÇΩ. –†–µ—à–∏–ª –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö –∫–∞–∫ –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É. –ù–∞—á–∞–ª —Å —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –¥–æ–º–∞, —Ç–∞–∫ –∫–∞–∫ —Å–∞–º —á–∞—Å—Ç–æ —Å—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π –ø–æ–∏—Å–∫–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.\n\n–ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü –±—ã–ª —Å–ª–æ–∂–Ω—ã–º - –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–∫—É–ø–∫–∏, –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏. –ù–æ –±–ª–∞–≥–æ–¥–∞—Ä—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∑–Ω–∞–Ω–∏—è–º –∏–∑ –∫—É—Ä—Å–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, —è –±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏–ª –æ—à–∏–±–∫–∏.\n\n–£–∂–µ —á–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞ –º–æ–π –¥–æ—Ö–æ–¥ —Å–æ—Å—Ç–∞–≤–∏–ª 350 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü. –°–µ–π—á–∞—Å —è –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—à–µ–ª —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ —Ä–∞–∑–≤–∏–≤–∞—é —Å–≤–æ–π –±–∏–∑–Ω–µ—Å –Ω–∞ Wildberries.'
    },
    {
      id: 2,
      name: '–ú–∞—Ä–∏—è',
      avatar: 'üë©‚Äçüíº',
      category: '–ö–æ—Å–º–µ—Ç–∏–∫–∞',
      revenue: '280 000 ‚ÇΩ',
      period: '4 –º–µ—Å—è—Ü–∞',
      quote: '–ö—É—Ä—Å –ø–æ–º–æ–≥ –º–Ω–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤–æ –≤—Å–µ—Ö –Ω—é–∞–Ω—Å–∞—Ö —Ä–∞–±–æ—Ç—ã —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º. –¢–µ–ø–µ—Ä—å —É –º–µ–Ω—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥ –∏ —Å–≤–æ–±–æ–¥–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫',
      fullStory: '–Ø –≤—Å–µ–≥–¥–∞ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª–∞—Å—å –∫–æ—Å–º–µ—Ç–∏–∫–æ–π –∏ –º–µ—á—Ç–∞–ª–∞ –æ —Å–≤–æ–µ–º –±–∏–∑–Ω–µ—Å–µ –≤ —ç—Ç–æ–π —Å—Ñ–µ—Ä–µ. Wildberries –∫–∞–∑–∞–ª—Å—è —Ö–æ—Ä–æ—à–µ–π –ø–ª–æ—â–∞–¥–∫–æ–π –¥–ª—è —Å—Ç–∞—Ä—Ç–∞, –Ω–æ —è –±–æ—è–ª–∞—Å—å –≤—ã—Å–æ–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –≤ –Ω–∏—à–µ –∫–æ—Å–º–µ—Ç–∏–∫–∏.\n\n–ö—É—Ä—Å –¥–∞–ª –º–Ω–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –≤—ã–¥–µ–ª–∏—Ç—å—Å—è —Å—Ä–µ–¥–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤. –Ø –Ω–∞—à–ª–∞ —Å–≤–æ—é –Ω–∏—à—É - –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –∫–æ—Å–º–µ—Ç–∏–∫–∞ –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–∂–∏ - –∏ —Å–¥–µ–ª–∞–ª–∞ –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ –æ–ø–∏—Å–∞–Ω–∏–π –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.\n\n–ß–µ—Ä–µ–∑ 4 –º–µ—Å—è—Ü–∞ –º–æ–π –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥ –¥–æ—Å—Ç–∏–≥ 280 000 ‚ÇΩ. –°–∞–º–æ–µ —Ü–µ–Ω–Ω–æ–µ - —ç—Ç–æ —Å–≤–æ–±–æ–¥–∞, –∫–æ—Ç–æ—Ä—É—é —è –ø–æ–ª—É—á–∏–ª–∞. –¢–µ–ø–µ—Ä—å —è –º–æ–≥—É —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑ –ª—é–±–æ–π —Ç–æ—á–∫–∏ –º–∏—Ä–∞ –∏ —É–¥–µ–ª—è—Ç—å –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–µ–º—å–µ.'
    },
    {
      id: 3,
      name: '–î–º–∏—Ç—Ä–∏–π',
      avatar: 'üë®‚Äçüíª',
      category: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞',
      revenue: '520 000 ‚ÇΩ',
      period: '6 –º–µ—Å—è—Ü–µ–≤',
      quote: '–û—Ç –Ω—É–ª—è –¥–æ –ø–æ–ª—É–º–∏–ª–ª–∏–æ–Ω–∞ –∑–∞ –ø–æ–ª–≥–æ–¥–∞ - —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–µ –∏–∑ –∫—É—Ä—Å–∞ –∏ –Ω–µ –±–æ—è—Ç—å—Å—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å',
      fullStory: '–î–æ Wildberries —è –ø–µ—Ä–µ–ø—Ä–æ–±–æ–≤–∞–ª –º–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–æ–≤ –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, –Ω–æ –≤–µ–∑–¥–µ —Ç—Ä–µ–±–æ–≤–∞–ª–∏—Å—å –±–æ–ª—å—à–∏–µ –≤–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏. –†–µ—à–∏–ª –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ, —Ç–∞–∫ –∫–∞–∫ –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞ –∫–∞–∑–∞–ª—Å—è –Ω–∏–∂–µ.\n\n–ù–∞—á–∞–ª —Å –Ω–µ–±–æ–ª—å—à–∏—Ö –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤ –¥–ª—è —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞—Å—à–∏—Ä—è—è –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç. –ö–ª—é—á–µ–≤—ã–º –º–æ–º–µ–Ω—Ç–æ–º —Å—Ç–∞–ª–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ –∏–∑ –∫—É—Ä—Å–∞ - —è —Å–º–æ–≥ –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ –≤—ã–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –∏ –æ—Ç—Å—Ä–æ—á–∫–µ –ø–ª–∞—Ç–µ–∂–∞.\n\n–ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤ –º–æ–π –æ–±–æ—Ä–æ—Ç –¥–æ—Å—Ç–∏–≥ 520 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü. –°–µ–π—á–∞—Å —É –º–µ–Ω—è –∫–æ–º–∞–Ω–¥–∞ –∏–∑ 3 —á–µ–ª–æ–≤–µ–∫, –∏ –º—ã –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞—Å—Ç–∏. –ü–ª–∞–Ω–∏—Ä—É—é –≤—ã–π—Ç–∏ –Ω–∞ –æ–±–æ—Ä–æ—Ç –≤ 1 –º–∏–ª–ª–∏–æ–Ω —Ä—É–±–ª–µ–π –∫ –∫–æ–Ω—Ü—É –≥–æ–¥–∞.'
    },
    {
      id: 4,
      name: '–ï–ª–µ–Ω–∞',
      avatar: 'üë©‚Äçüé®',
      category: '–¢–æ–≤–∞—Ä—ã –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞',
      revenue: '180 000 ‚ÇΩ',
      period: '3 –º–µ—Å—è—Ü–∞',
      quote: '–ü—Ä–µ–≤—Ä–∞—Ç–∏–ª–∞ —Ö–æ–±–±–∏ –≤ –ø—Ä–∏–±—ã–ª—å–Ω—ã–π –±–∏–∑–Ω–µ—Å –±–ª–∞–≥–æ–¥–∞—Ä—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º –∏–∑ –∫—É—Ä—Å–∞',
      fullStory: '–Ø –≤—Å–µ–≥–¥–∞ —É–≤–ª–µ–∫–∞–ª–∞—Å—å —Ä—É–∫–æ–¥–µ–ª–∏–µ–º –∏ —á–∞—Å—Ç–æ –¥–µ–ª–∞–ª–∞ –ø–æ–¥–∞—Ä–∫–∏ –¥—Ä—É–∑—å—è–º —Å–≤–æ–∏–º–∏ —Ä—É–∫–∞–º–∏. –ú–Ω–æ–≥–∏–µ —Å–æ–≤–µ—Ç–æ–≤–∞–ª–∏ –º–Ω–µ –ø—Ä–æ–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –∏–∑–¥–µ–ª–∏—è, –Ω–æ —è –Ω–µ –∑–Ω–∞–ª–∞, —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å.\n\n–ö—É—Ä—Å –¥–∞–ª –º–Ω–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ. –Ø –Ω–∞—á–∞–ª–∞ —Å –Ω–µ–±–æ–ª—å—à–æ–π –ª–∏–Ω–µ–π–∫–∏ –Ω–∞–±–æ—Ä–æ–≤ –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏.\n\n–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞ –º–æ–π –¥–æ—Ö–æ–¥ —Å–æ—Å—Ç–∞–≤–∏–ª 180 000 ‚ÇΩ. –≠—Ç–æ –Ω–µ —Å–∞–º–∞—è –±–æ–ª—å—à–∞—è —Å—É–º–º–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –¥—Ä—É–≥–∏–º–∏ —É—á–µ–Ω–∏–∫–∞–º–∏, –Ω–æ –¥–ª—è –º–µ–Ω—è —ç—Ç–æ –æ–≥—Ä–æ–º–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ - —è –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é –Ω–∞ –ª—é–±–∏–º–æ–º –¥–µ–ª–µ –±–æ–ª—å—à–µ, —á–µ–º –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ä–∞–±–æ—Ç–µ –æ—Ñ–∏—Å-–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º.'
    },
    {
      id: 5,
      name: '–°–µ—Ä–≥–µ–π',
      avatar: 'üë®‚Äçü¶∞',
      category: '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã',
      revenue: '420 000 ‚ÇΩ',
      period: '5 –º–µ—Å—è—Ü–µ–≤',
      quote: '–ù–∞—à–µ–ª —Å–≤–æ—é –Ω–∏—à—É –≤ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö –∏ –≤—ã—à–µ–ª –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—ã—Å–æ–∫—É—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é',
      fullStory: '–Ø –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä –ø–æ —Ñ–∏—Ç–Ω–µ—Å—É, –∏ —á–∞—Å—Ç–æ —Å—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π –ø–æ–∏—Å–∫–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤. –†–µ—à–∏–ª —Å–∞–º –∑–∞–Ω—è—Ç—å—Å—è –ø–æ—Å—Ç–∞–≤–∫–∞–º–∏ –Ω–∞ Wildberries.\n\n–ù–∞—á–∞–ª —Å –Ω–µ–±–æ–ª—å—à–æ–π –ª–∏–Ω–µ–π–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –¥–æ–º–∞—à–Ω–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫. –ë–ª–∞–≥–æ–¥–∞—Ä—è –∫—É—Ä—Å—É —è –ø–æ–Ω—è–ª, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è –ø–æ–∏—Å–∫–∞. –ú–æ–∏–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º —Å—Ç–∞–ª–∏ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–Ω–µ—Ä–∞.\n\n–ß–µ—Ä–µ–∑ 5 –º–µ—Å—è—Ü–µ–≤ –º–æ–π –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥ –¥–æ—Å—Ç–∏–≥ 420 000 ‚ÇΩ. –°–µ–π—á–∞—Å —è —Ä–∞–∑–≤–∏–≤–∞—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±—Ä–µ–Ω–¥ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ø–ª–∞–Ω–∏—Ä—É—é –≤—ã—Ö–æ–¥ –Ω–∞ –¥—Ä—É–≥–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã.'
    }
  ];

  useEffect(() => {
    // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
    const timer = setTimeout(() => {
      setIsLoading(false);
    }, 800);
    
    return () => clearTimeout(timer);
  }, []);

  useEffect(() => {
    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É Telegram
    if (webApp?.MainButton && !isLoading) {
      webApp.MainButton.setText('–ù–∞—á–∞—Ç—å —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é —É—Å–ø–µ—Ö–∞');
      webApp.MainButton.show();
      webApp.MainButton.onClick(() => navigate('/subscription'));
    }
    
    return () => {
      // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
      webApp?.MainButton?.hide();
    };
  }, [webApp, isLoading, navigate]);

  const toggleStory = (id: number) => {
    setExpandedStory(expandedStory === id ? null : id);
  };

  if (isLoading) {
    return (
      <div className="flex flex-col items-center justify-center min-h-screen p-4">
        <div className="w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"></div>
        <p className="mt-4 text-gray-600 dark:text-gray-400">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–π —É—Å–ø–µ—Ö–∞...</p>
      </div>
    );
  }

  return (
    <div className="flex flex-col items-center justify-center p-4 space-y-6 pb-44 animate-fade-in">
      <div className="w-full max-w-md">
        <Button 
          variant="ghost" 
          onClick={() => navigate(-1)}
          leftIcon={<span className="text-lg">‚Üê</span>}
          className="mb-4"
        >
          –ù–∞–∑–∞–¥
        </Button>
        
        <h1 className="text-2xl font-bold text-center mb-2 animate-slide-in-right">
          –ò—Å—Ç–æ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
        </h1>
        
        <p className="text-center text-gray-600 dark:text-gray-400 mb-6 animate-slide-in-right" style={{ animationDelay: '50ms' }}>
          –í–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞—à–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–±–∏–ª–∏—Å—å —É—Å–ø–µ—Ö–∞ –Ω–∞ Wildberries
        </p>
        
        <div className="space-y-4">
          {successStories.map((story, index) => (
            <div key={story.id} style={{ animationDelay: `${100 + index * 100}ms` }}>
              <Card 
                variant={expandedStory === story.id ? 'primary' : 'default'}
                className="animate-slide-in-right transition-all duration-300" 
                onClick={() => toggleStory(story.id)}
              >
                <div className="flex items-start">
                  <div className="text-3xl mr-4">{story.avatar}</div>
                  <div className="flex-1">
                    <div className="flex justify-between items-start">
                      <div>
                        <h3 className="font-semibold">{story.name}</h3>
                        <p className="text-sm text-gray-600 dark:text-gray-400">{story.category}</p>
                      </div>
                      <div className="text-right">
                        <div className="text-primary font-bold">{story.revenue}</div>
                        <div className="text-xs text-gray-500 dark:text-gray-400">–∑–∞ {story.period}</div>
                      </div>
                    </div>
                    
                    <div className="mt-3">
                      <p className="italic text-sm">{story.quote}</p>
                      
                      {expandedStory === story.id && (
                        <div className="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 animate-fade-in">
                          {story.fullStory.split('\n\n').map((paragraph, i) => (
                            <p key={i} className="mb-3 text-sm">{paragraph}</p>
                          ))}
                        </div>
                      )}
                    </div>
                    
                    <div className="mt-3 text-right">
                      <Button 
                        variant="ghost" 
                        size="sm"
                        onClick={(e) => {
                          e.stopPropagation();
                          toggleStory(story.id);
                        }}
                      >
                        {expandedStory === story.id ? '–°–≤–µ—Ä–Ω—É—Ç—å' : '–ü–æ–¥—Ä–æ–±–Ω–µ–µ'}
                      </Button>
                    </div>
                  </div>
                </div>
              </Card>
            </div>
          ))}
        </div>
        
        <div style={{ animationDelay: '600ms' }}>
          <Card 
            variant="accent" 
            className="mt-6 animate-slide-in-right" 
          >
            <div>
              <h3 className="text-lg font-semibold mb-2">–ù–∞—á–Ω–∏—Ç–µ —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é —É—Å–ø–µ—Ö–∞</h3>
              <p className="mb-4 text-sm">
                –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É –∫—É—Ä—Å—É –∏ —Å—Ç–∞–Ω—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–º —É—Å–ø–µ—à–Ω—ã–º –ø—Ä–æ–¥–∞–≤—Ü–æ–º –Ω–∞ Wildberries
              </p>
              <Button 
                variant="primary" 
                fullWidth
                onClick={() => navigate('/subscription')}
              >
                –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫—É—Ä—Å—É
              </Button>
            </div>
          </Card>
        </div>
      </div>
    </div>
  );
};

export default SuccessStoriesPage; 